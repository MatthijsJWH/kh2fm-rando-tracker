{"version":3,"sources":["../../js/co_op.js"],"names":[],"mappings":"gBAAI,CAAA,M,CAEE,cAAc,CAAG,SAAC,CAAD,CAAW,CAChC,GAAM,CAAA,CAAG,CAAG,IAAI,CAAC,KAAL,CAAW,CAAK,CAAC,IAAjB,CAAZ,CAEA,OAAQ,CAAG,CAAC,IAAZ,EACE,IAAK,cAAL,CAAqB,CACnB,GAAM,CAAA,CAAO,CAAG,CAAG,CAAC,EAApB,CACA,OAAO,CAAC,GAAR,gCAAoC,CAApC,EAFmB,CAInB,GAAM,CAAA,CAAM,CAAG,CAAC,CAAC,UAAD,CAAhB,CACA,CAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB,CALmB,CAMnB,CAAM,CAAC,SAAP,uCAAkD,CAAlD,0CANmB,CAQnB,KACD,CAED,IAAK,aAAL,CAAoB,CACF,CAAG,CAAC,EADF,CAElB,KACD,CAED,IAAK,aAAL,CAAoB,CAClB,GAAM,CAAA,CAAO,CAAG,CAAC,CAAC,OAAD,CAAD,CAAW,SAAX,IAAhB,CACA,CAAO,CAAC,OAAR,CAAgB,MAAhB,CAAyB,CAAG,CAAC,EAFX,CAGlB,CAAC,CAAC,MAAD,CAAD,CAAU,WAAV,CAAsB,CAAtB,CAHkB,CAIlB,KACD,CAED,IAAK,WAAL,CAAkB,CAChB,CAAC,gCAAwB,CAAG,CAAC,EAA5B,QAAD,CAAqC,MAArC,EADgB,CAEhB,KACD,CAED,IAAK,cAAL,CAAqB,CACnB,GAAM,CAAA,CAAI,CAAG,CAAC,gCAAwB,CAAG,CAAC,EAA5B,QAAD,CAAqC,QAArC,CAA8C,CAAG,CAAC,IAAlD,CAAb,CACA,aAAa,CAAC,CAAE,aAAa,CAAE,CAAjB,CAAD,CAA0B,CAAG,CAAC,MAA9B,CAFM,CAGnB,KACD,CAED,IAAK,gBAAL,CAAuB,CACrB,GAAM,CAAA,CAAI,CAAG,CAAC,gCAAwB,CAAG,CAAC,EAA5B,QAAD,CAAqC,QAArC,CAA8C,CAAG,CAAC,IAAlD,CAAb,CACA,eAAe,CAAC,CAAE,aAAa,CAAE,CAAjB,CAAD,CAFM,CAGrB,KACD,CAED,IAAK,cAAL,CAAqB,CACnB,GAAM,CAAA,CAAI,CAAG,CAAC,gCAAwB,CAAG,CAAC,EAA5B,QAAD,CAAqC,QAArC,CAA8C,CAAG,CAAC,IAAlD,CAAb,CACA,aAAa,CAAC,CAAE,aAAa,CAAE,CAAjB,CAAD,CAFM,CAGnB,KACD,CA7CH,CA+CD,C,CAED,CAAC,CAAC,aAAD,CAAD,CAAiB,QAAjB,CAA4B,UAAW,CAYrC,MAXA,CAAA,MAAM,CAAG,GAAI,CAAA,SAAJ,6BAWT,CATA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,CAAgC,UAAW,CACzC,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,SAAL,CAAe,CACzB,IAAI,CAAE,WADmB,CAEzB,IAAI,CAAE,CAAC,CAAC,mBAAD,CAAD,CAAuB,KAFJ,CAAf,CAAZ,CAID,CALD,CASA,CAFA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,CAAmC,cAAnC,CAEA,GACD,C,CAED,CAAC,CAAC,eAAD,CAAD,CAAmB,QAAnB,CAA8B,UAAW,CAYvC,MAXA,CAAA,MAAM,CAAG,GAAI,CAAA,SAAJ,6BAWT,CATA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,CAAgC,UAAW,CACzC,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,SAAL,CAAe,CACzB,IAAI,CAAE,aADmB,CAEzB,IAAI,CAAE,CAAC,CAAC,qBAAD,CAAD,CAAyB,KAAzB,EAAkC,CAFf,CAAf,CAAZ,CAID,CALD,CASA,CAFA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,CAAmC,cAAnC,CAEA,GACD,C","file":"co_op.js","sourcesContent":["var socket;\n\nconst messageHandler = (event) => {\n  const msg = JSON.parse(event.data);\n\n  switch (msg.type) {\n    case \"room_created\": {\n      const room_id = msg.id;\n      console.log(`Room created with ID ${room_id}`);\n\n      const roomId = $(\"#room_id\");\n      roomId.classList.add(\"active\");\n      roomId.innerHTML = `Created room with ID: <code>${room_id}</code> (Give this to your teammates!)`\n\n      break;\n    }\n\n    case \"room_joined\": {\n      const room_id = msg.id;\n      break;\n    }\n\n    case \"user_joined\": {\n      const newGrid = $(\".grid\").cloneNode(true);\n      newGrid.dataset.userId = msg.id;\n      $(\"main\").appendChild(newGrid);\n      break;\n    }\n\n    case \"user_left\": {\n      $(`.grid[data-user-id=\"${msg.id}\"]`).remove();\n      break;\n    }\n\n    case \"user_primary\": {\n      const cell = $(`.grid[data-user-id=\"${msg.id}\"]`).children[msg.item];\n      handlePrimary({ currentTarget: cell }, msg.offset);\n      break;\n    }\n\n    case \"user_secondary\": {\n      const cell = $(`.grid[data-user-id=\"${msg.id}\"]`).children[msg.item];\n      handleSecondary({ currentTarget: cell });\n      break;\n    }\n\n    case \"user_disable\": {\n      const cell = $(`.grid[data-user-id=\"${msg.id}\"]`).children[msg.item];\n      handleDisable({ currentTarget: cell });\n      break;\n    }\n  }\n}\n\n$(\"#co_op_join\").onsubmit = (event) => {\n  socket = new WebSocket(process.env.WS_URL);\n\n  socket.addEventListener(\"open\", (event) => {\n    socket.send(JSON.stringify({\n      type: \"join_room\",\n      room: $(\"#co_op_join input\").value,\n    }));\n  });\n\n  socket.addEventListener(\"message\", messageHandler);\n\n  return false;\n}\n\n$(\"#co_op_create\").onsubmit = (event) => {\n  socket = new WebSocket(process.env.WS_URL);\n\n  socket.addEventListener(\"open\", (event) => {\n    socket.send(JSON.stringify({\n      type: \"create_room\",\n      size: $(\"#co_op_create input\").value || 2,\n    }));\n  });\n\n  socket.addEventListener(\"message\", messageHandler);\n\n  return false;\n}\n"]}