"use strict";function handlePrimary(a){var c,d,b=Math.min,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,f=a.currentTarget;if(!f.classList.contains("disabled")){var g=f.parentElement;if(socket&&!g.dataset.userId){var o=Array.prototype.indexOf.call(g.children,f);socket.send(JSON.stringify({type:"user_primary",item:o,offset:e}))}var h=$(".nobody",f),i=+(null!==(c=f.dataset.total)&&void 0!==c?c:1)+!!h,j=i+1,k=+(null!==(d=f.dataset.level)&&void 0!==d?d:0);(0===k||$(".icon",f).classList.contains("opaque"))&&(k=(k+(j+e)%j)%j),f.dataset.level=k,h&&k===i&&h.classList.add("opaque");var l=b(k,i-!!h),m=f.dataset.group,n=m?$$("[data-group=\"".concat(m,"\"]"),f.parent):[f];n.forEach(function(a){a.dataset.level=k;var b=f===a?$(".icon",a):null,c=$(".number",a),d=$(".nobody",a);switch(1<l&&(null===c||void 0===c?void 0:c.setAttribute("src","img/numbers/".concat(l,".png"))),k){case 0:null===b||void 0===b?void 0:b.classList.remove("opaque"),null===c||void 0===c?void 0:c.classList.remove("opaque"),null===d||void 0===d?void 0:d.classList.remove("opaque");break;case 1:null===b||void 0===b?void 0:b.classList.add("opaque"),null===c||void 0===c?void 0:c.classList.remove("opaque");break;default:null===b||void 0===b?void 0:b.classList.add("opaque"),null===c||void 0===c?void 0:c.classList.add("opaque");}})}}function handleSecondary(a){var b,c=a.currentTarget;if(!c.classList.contains("disabled")){var d=$(".secondary",c);if(d){var e=c.parentElement;if(socket&&!e.dataset.userId){var h=Array.prototype.indexOf.call(e.children,c);socket.send(JSON.stringify({type:"user_secondary",item:h}))}var f=d.dataset.files;if(!f)return d.classList.toggle("opaque");f=JSON.parse(d.dataset.files);var g=+(null!==(b=d.dataset.index)&&void 0!==b?b:0)+1;0==g%(f.length+1)?g=0:d.setAttribute("src","img/secondary/".concat(f[g-1],".png")),2>g&&d.classList.toggle("opaque"),d.dataset.index=g}}}function handleDisable(a){var b=a.currentTarget,c=b.parentElement;if(socket&&!c.dataset.userId){var d=Array.prototype.indexOf.call(c.children,b);socket.send(JSON.stringify({type:"user_secondary",item:d}))}b.classList.toggle("disabled")}$$(".grid > div").forEach(function(a){a.onmousedown=function(a){switch(a.button){case 0:handlePrimary(a);break;case 2:handleSecondary(a);break;case 1:handleDisable(a);}},a.oncontextmenu=function(a){return a.preventDefault()},a.onwheel=function(a){if(scrollElem.checked){a.preventDefault();var b=0>a.deltaY?1:-1;handlePrimary(a,b)}}}),document.body.onmousedown=function(a){if(1===a.button)return!1};

//# sourceMappingURL=main.js.map