function handlePrimary(a,b=1){const c=a.currentTarget;if(c.classList.contains("disabled"))return;const d=c.querySelector(".nobody"),e=+(c.dataset.total??1)+!!d,f=e+1;let g=+(c.dataset.level??0);if((0==g||c.querySelector(".icon").classList.contains("opaque"))&&(g=(g+(f+b)%f)%f),c.dataset.level=g,d&&g===e)return d.classList.add("opaque");const h=c.dataset.group,i=h?document.querySelectorAll(`[data-group="${h}"]`):[c];i.forEach(a=>{a.dataset.level=g;const b=a.querySelector(".icon"),d=a.querySelector(".number"),e=a.querySelector(".nobody");switch(1<g&&d?.setAttribute("src",`img/numbers/${g}.png`),g){case 0:c===a&&b.classList.remove("opaque"),d?.classList.remove("opaque"),e?.classList.remove("opaque");break;case 1:c===a&&b.classList.add("opaque"),d?.classList.remove("opaque");break;default:c===a&&b.classList.add("opaque"),d?.classList.add("opaque");}})}function handleSecondary(a){const b=a.currentTarget;if(b.classList.contains("disabled"))return;const c=b.querySelector(".secondary");if(!c)return;let d=c.dataset.files;if(!d)return c.classList.toggle("opaque");d=JSON.parse(c.dataset.files);let e=+(c.dataset.index??0)+1;0==e%(d.length+1)?e=0:c.setAttribute("src",`img/secondary/${d[e-1]}.png`),2>e&&c.classList.toggle("opaque"),c.dataset.index=e}function handleDisable(a){a.currentTarget.classList.toggle("disabled")}document.querySelectorAll(".grid > div").forEach(a=>{a.onmousedown=a=>{switch(a.button){case 0:handlePrimary(a);break;case 2:handleSecondary(a);break;case 1:handleDisable(a);}},a.oncontextmenu=a=>a.preventDefault(),a.onwheel=a=>{if("true"===localStorage.scroll){a.preventDefault();const b=0>a.deltaY?1:-1;handlePrimary(a,b)}}}),document.body.onmousedown=a=>{if(1===a.button)return!1};