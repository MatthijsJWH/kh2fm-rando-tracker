"use strict";var socket;function createPRow(a){var b=document.createElement("div");b.classList.add("row","message");var c=document.createElement("p");return c.textContent=a,b.appendChild(c),b}function messageHandler(a,b){var c=JSON.parse(a.data);switch(c.type){case"room_created":{$("#room_id").innerHTML="Created room with ID: <code>".concat(c.id,"</code> (Give this to your teammates!)");break}case"room_joined":{c.id;break}case"user_joined":{var d=$(".grid").cloneNode(!0);d.dataset.userId=c.id,$("main").appendChild(d);break}case"user_left":{$(".grid[data-user-id=\"".concat(c.id,"\"]")).remove();break}case"error":{b.insertAdjacentElement("afterend",createPRow("Error: ".concat(c.message)));break}case"user_primary":{var e=$(".grid[data-user-id=\"".concat(c.id,"\"]")).children[c.item];handlePrimary({currentTarget:e},c.offset);break}case"user_secondary":{var f=$(".grid[data-user-id=\"".concat(c.id,"\"]")).children[c.item];handleSecondary({currentTarget:f});break}case"user_disable":{var g=$(".grid[data-user-id=\"".concat(c.id,"\"]")).children[c.item];handleDisable({currentTarget:g});break}}}$("#co_op_join").onsubmit=function(a){var b;null===(b=$(".row.message"))||void 0===b?void 0:b.remove();try{socket=new WebSocket("wss://tracker-ws.zaxu.xyz")}catch(b){return a.target.insertAdjacentElement("afterend",createPRow("Could not connect to server. (Server may be down)")),console.error(b),!1}return socket.addEventListener("open",function(){socket.send(JSON.stringify({type:"join_room",room:$("#co_op_join input").value}))}),socket.addEventListener("message",function(b){return messageHandler(b,a.target)}),!1},$("#co_op_create").onsubmit=function(a){var b;socket&&socket.close(1e3),null===(b=$(".row.message"))||void 0===b?void 0:b.remove();try{socket=new WebSocket("wss://tracker-ws.zaxu.xyz")}catch(b){return a.target.insertAdjacentElement("afterend",createPRow("Could not connect to server. (Server may be down)")),!1}var c=parseInt($("#co_op_create input").value);c||(a.target.insertAdjacentElement("afterend",createPRow("Invalid or no size given, using default of 2.")),c=2);var d=$("#room_id");return d.classList.add("active"),d.innerHTML="Creating room...",socket.addEventListener("open",function(){socket.send(JSON.stringify({type:"create_room",size:c}))}),socket.addEventListener("message",function(b){return messageHandler(b,a.target)}),!1};var coOpColumnsElem=$("#co_op_columns");try{var _localStorage$coOpCol;coOpColumnsElem.value=null!==(_localStorage$coOpCol=localStorage.coOpColumns)&&void 0!==_localStorage$coOpCol?_localStorage$coOpCol:null}catch(a){}coOpColumnsElem.oninput=function(a){var b=a.target.value,c=$("main");c.style.gridTemplateColumns=b?"repeat(".concat(b,", auto)"):null;try{localStorage.coOpColumns=b}catch(a){}},coOpColumnsElem.oninput({target:coOpColumnsElem});

//# sourceMappingURL=co_op.js.map