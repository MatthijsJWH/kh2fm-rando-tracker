"use strict";var socket;function messageHandler(a){var b=JSON.parse(a.data);switch(b.type){case"room_created":{var c=b.id;$("#room_id").innerHTML="Created room with ID: <code>".concat(c,"</code> (Give this to your teammates!)");break}case"room_joined":{b.id;break}case"user_joined":{var d=$(".grid").cloneNode(!0);d.dataset.userId=b.id,$("main").appendChild(d);break}case"user_left":{$(".grid[data-user-id=\"".concat(b.id,"\"]")).remove();break}case"error":{var e=$("#co_op_message");e.classList.add("active"),e.innerHTML="Error: ".concat(b.message)}case"user_primary":{var f=$(".grid[data-user-id=\"".concat(b.id,"\"]")).children[b.item];handlePrimary({currentTarget:f},b.offset);break}case"user_secondary":{var g=$(".grid[data-user-id=\"".concat(b.id,"\"]")).children[b.item];handleSecondary({currentTarget:g});break}case"user_disable":{var h=$(".grid[data-user-id=\"".concat(b.id,"\"]")).children[b.item];handleDisable({currentTarget:h});break}}}$("#co_op_join").onsubmit=function(){try{socket=new WebSocket("wss://tracker-ws.zaxu.xyz")}catch(b){var a=$("#co_op_message");return a.classList.add("active"),a.innerHTML="Could not connect to websocket server. (Server may be down)",void console.error(b)}return socket.addEventListener("open",function(){socket.send(JSON.stringify({type:"join_room",room:$("#co_op_join input").value}))}),socket.addEventListener("message",messageHandler),!1},$("#co_op_create").onsubmit=function(){socket&&socket.close(1e3);try{socket=new WebSocket("wss://tracker-ws.zaxu.xyz")}catch(a){var c=$("#co_op_message");return c.classList.add("active"),void(c.innerHTML="Could not connect to websocket server. (Server may be down)")}var a=parseInt($("#co_op_create input").value);if(!a){var d=$("#co_op_message");d.classList.add("active"),d.innerHTML="Invalid or no size given, using default of 2.",a=2}var b=$("#room_id");return b.classList.add("active"),b.innerHTML="Creating room...",socket.addEventListener("open",function(){socket.send(JSON.stringify({type:"create_room",size:a}))}),socket.addEventListener("message",messageHandler),!1};var coOpColumnsElem=$("#co_op_columns");try{var _localStorage$coOpCol;coOpColumnsElem.value=null!==(_localStorage$coOpCol=localStorage.coOpColumns)&&void 0!==_localStorage$coOpCol?_localStorage$coOpCol:null}catch(a){}coOpColumnsElem.oninput=function(a){var b=a.target.value,c=$("main");c.style.gridTemplateColumns=b?"repeat(".concat(b,", auto)"):null;try{localStorage.coOpColumns=b}catch(a){}},coOpColumnsElem.oninput({target:coOpColumnsElem});

//# sourceMappingURL=co_op.js.map